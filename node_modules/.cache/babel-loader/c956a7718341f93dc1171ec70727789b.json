{"ast":null,"code":"import { mutate } from './use-swr';\nimport hash from './libs/hash';\n\nvar Cache =\n/** @class */\nfunction () {\n  function Cache(initialData) {\n    if (initialData === void 0) {\n      initialData = {};\n    }\n\n    this.__cache = new Map(Object.entries(initialData));\n    this.__listeners = [];\n  }\n\n  Cache.prototype.get = function (key) {\n    var _key = this.serializeKey(key)[0];\n    return this.__cache.get(_key);\n  };\n\n  Cache.prototype.set = function (key, value, shouldNotify) {\n    if (shouldNotify === void 0) {\n      shouldNotify = true;\n    }\n\n    var _key = this.serializeKey(key)[0];\n\n    this.__cache.set(_key, value);\n\n    if (shouldNotify) mutate(key, value, false);\n    this.notify();\n  };\n\n  Cache.prototype.keys = function () {\n    return Array.from(this.__cache.keys());\n  };\n\n  Cache.prototype.has = function (key) {\n    var _key = this.serializeKey(key)[0];\n    return this.__cache.has(_key);\n  };\n\n  Cache.prototype.clear = function (shouldNotify) {\n    if (shouldNotify === void 0) {\n      shouldNotify = true;\n    }\n\n    if (shouldNotify) this.__cache.forEach(function (key) {\n      return mutate(key, null, false);\n    });\n\n    this.__cache.clear();\n\n    this.notify();\n  };\n\n  Cache.prototype.delete = function (key, shouldNotify) {\n    if (shouldNotify === void 0) {\n      shouldNotify = true;\n    }\n\n    var _key = this.serializeKey(key)[0];\n    if (shouldNotify) mutate(key, null, false);\n\n    this.__cache.delete(_key);\n\n    this.notify();\n  }; // TODO: introduce namespace for the cache\n\n\n  Cache.prototype.serializeKey = function (key) {\n    var args = null;\n\n    if (typeof key === 'function') {\n      try {\n        key = key();\n      } catch (err) {\n        // dependencies not ready\n        key = '';\n      }\n    }\n\n    if (Array.isArray(key)) {\n      // args array\n      args = key;\n      key = hash(key);\n    } else {\n      // convert null to ''\n      key = String(key || '');\n    }\n\n    var errorKey = key ? 'err@' + key : '';\n    return [key, args, errorKey];\n  };\n\n  Cache.prototype.subscribe = function (listener) {\n    var _this = this;\n\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    this.__listeners.push(listener);\n\n    return function () {\n      if (!isSubscribed) return;\n      isSubscribed = false;\n\n      var index = _this.__listeners.indexOf(listener);\n\n      if (index > -1) {\n        _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n        _this.__listeners.length--;\n      }\n    };\n  }; // Notify Cache subscribers about a change in the cache\n\n\n  Cache.prototype.notify = function () {\n    for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n      var listener = _a[_i];\n      listener();\n    }\n  };\n\n  return Cache;\n}();\n\nexport default Cache;","map":{"version":3,"sources":["/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/node_modules/swr/esm/cache.js"],"names":["mutate","hash","Cache","initialData","__cache","Map","Object","entries","__listeners","prototype","get","key","_key","serializeKey","set","value","shouldNotify","notify","keys","Array","from","has","clear","forEach","delete","args","err","isArray","String","errorKey","subscribe","listener","_this","Error","isSubscribed","push","index","indexOf","length","_i","_a"],"mappings":"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","sourcesContent":["import { mutate } from './use-swr';\nimport hash from './libs/hash';\nvar Cache = /** @class */ (function () {\n    function Cache(initialData) {\n        if (initialData === void 0) { initialData = {}; }\n        this.__cache = new Map(Object.entries(initialData));\n        this.__listeners = [];\n    }\n    Cache.prototype.get = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.get(_key);\n    };\n    Cache.prototype.set = function (key, value, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        this.__cache.set(_key, value);\n        if (shouldNotify)\n            mutate(key, value, false);\n        this.notify();\n    };\n    Cache.prototype.keys = function () {\n        return Array.from(this.__cache.keys());\n    };\n    Cache.prototype.has = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.has(_key);\n    };\n    Cache.prototype.clear = function (shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        if (shouldNotify)\n            this.__cache.forEach(function (key) { return mutate(key, null, false); });\n        this.__cache.clear();\n        this.notify();\n    };\n    Cache.prototype.delete = function (key, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        if (shouldNotify)\n            mutate(key, null, false);\n        this.__cache.delete(_key);\n        this.notify();\n    };\n    // TODO: introduce namespace for the cache\n    Cache.prototype.serializeKey = function (key) {\n        var args = null;\n        if (typeof key === 'function') {\n            try {\n                key = key();\n            }\n            catch (err) {\n                // dependencies not ready\n                key = '';\n            }\n        }\n        if (Array.isArray(key)) {\n            // args array\n            args = key;\n            key = hash(key);\n        }\n        else {\n            // convert null to ''\n            key = String(key || '');\n        }\n        var errorKey = key ? 'err@' + key : '';\n        return [key, args, errorKey];\n    };\n    Cache.prototype.subscribe = function (listener) {\n        var _this = this;\n        if (typeof listener !== 'function') {\n            throw new Error('Expected the listener to be a function.');\n        }\n        var isSubscribed = true;\n        this.__listeners.push(listener);\n        return function () {\n            if (!isSubscribed)\n                return;\n            isSubscribed = false;\n            var index = _this.__listeners.indexOf(listener);\n            if (index > -1) {\n                _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n                _this.__listeners.length--;\n            }\n        };\n    };\n    // Notify Cache subscribers about a change in the cache\n    Cache.prototype.notify = function () {\n        for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n    };\n    return Cache;\n}());\nexport default Cache;\n"]},"metadata":{},"sourceType":"module"}