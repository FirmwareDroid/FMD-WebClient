{"ast":null,"code":"import _uniq from 'lodash/uniq';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphaël Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\n\nimport React from 'react';\nimport { sankey as d3Sankey } from 'd3-sankey';\nimport { sankeyAlignmentFromProp } from '../../../props';\nimport SvgWrapper from '../SvgWrapper';\nimport SankeyNodes from './SankeyNodes';\nimport SankeyLinks from './SankeyLinks';\nimport SankeyLabels from './SankeyLabels';\nimport Container from '../Container';\nimport { SankeyPropTypes } from './props';\nimport enhance from './enhance';\n\nvar getId = function getId(d) {\n  return d.id;\n};\n\nvar Sankey = function Sankey(_ref) {\n  var _data = _ref.data,\n      align = _ref.align,\n      margin = _ref.margin,\n      width = _ref.width,\n      height = _ref.height,\n      outerWidth = _ref.outerWidth,\n      outerHeight = _ref.outerHeight,\n      nodeOpacity = _ref.nodeOpacity,\n      nodeHoverOpacity = _ref.nodeHoverOpacity,\n      nodeHoverOthersOpacity = _ref.nodeHoverOthersOpacity,\n      nodeWidth = _ref.nodeWidth,\n      nodePaddingX = _ref.nodePaddingX,\n      nodePaddingY = _ref.nodePaddingY,\n      nodeBorderWidth = _ref.nodeBorderWidth,\n      getNodeBorderColor = _ref.getNodeBorderColor,\n      setCurrentNode = _ref.setCurrentNode,\n      currentNode = _ref.currentNode,\n      linkOpacity = _ref.linkOpacity,\n      linkHoverOpacity = _ref.linkHoverOpacity,\n      linkHoverOthersOpacity = _ref.linkHoverOthersOpacity,\n      linkContract = _ref.linkContract,\n      getLinkColor = _ref.getLinkColor,\n      setCurrentLink = _ref.setCurrentLink,\n      currentLink = _ref.currentLink,\n      enableLabels = _ref.enableLabels,\n      getLabel = _ref.getLabel,\n      labelPosition = _ref.labelPosition,\n      labelPadding = _ref.labelPadding,\n      labelOrientation = _ref.labelOrientation,\n      getLabelTextColor = _ref.getLabelTextColor,\n      theme = _ref.theme,\n      getColor = _ref.getColor,\n      nodeTooltip = _ref.nodeTooltip,\n      linkTooltip = _ref.linkTooltip,\n      animate = _ref.animate,\n      motionDamping = _ref.motionDamping,\n      motionStiffness = _ref.motionStiffness,\n      isInteractive = _ref.isInteractive,\n      onClick = _ref.onClick,\n      tooltipFormat = _ref.tooltipFormat;\n  var sankey = d3Sankey().nodeAlign(sankeyAlignmentFromProp(align)).nodeWidth(nodeWidth).nodePadding(nodePaddingY).size([width, height]).nodeId(getId); // deep clone is required as the sankey diagram mutates data\n\n  var data = _cloneDeep(_data);\n\n  sankey(data);\n  data.nodes.forEach(function (node) {\n    node.color = getColor(node);\n    node.label = getLabel(node);\n    node.x = node.x0 + nodePaddingX;\n    node.y = node.y0;\n    node.width = Math.max(node.x1 - node.x0 - nodePaddingX * 2, 0);\n    node.height = Math.max(node.y1 - node.y0, 0);\n  });\n  data.links.forEach(function (link) {\n    link.color = getLinkColor(link);\n  });\n  var motionProps = {\n    animate: animate,\n    motionDamping: motionDamping,\n    motionStiffness: motionStiffness\n  };\n\n  var isCurrentNode = function isCurrentNode() {\n    return false;\n  };\n\n  var isCurrentLink = function isCurrentLink() {\n    return false;\n  };\n\n  if (currentLink) {\n    isCurrentNode = function isCurrentNode(_ref2) {\n      var id = _ref2.id;\n      return id === currentLink.source.id || id === currentLink.target.id;\n    };\n\n    isCurrentLink = function isCurrentLink(_ref3) {\n      var source = _ref3.source,\n          target = _ref3.target;\n      return source.id === currentLink.source.id && target.id === currentLink.target.id;\n    };\n  }\n\n  if (currentNode) {\n    var currentNodeIds = [currentNode.id];\n    data.links.filter(function (_ref4) {\n      var source = _ref4.source,\n          target = _ref4.target;\n      return source.id === currentNode.id || target.id === currentNode.id;\n    }).forEach(function (_ref5) {\n      var source = _ref5.source,\n          target = _ref5.target;\n      currentNodeIds.push(source.id);\n      currentNodeIds.push(target.id);\n    });\n    currentNodeIds = _uniq(currentNodeIds);\n\n    isCurrentNode = function isCurrentNode(_ref6) {\n      var id = _ref6.id;\n      return currentNodeIds.includes(id);\n    };\n\n    isCurrentLink = function isCurrentLink(_ref7) {\n      var source = _ref7.source,\n          target = _ref7.target;\n      return source.id === currentNode.id || target.id === currentNode.id;\n    };\n  }\n\n  return React.createElement(Container, {\n    isInteractive: isInteractive,\n    theme: theme\n  }, function (_ref8) {\n    var showTooltip = _ref8.showTooltip,\n        hideTooltip = _ref8.hideTooltip;\n    return React.createElement(SvgWrapper, {\n      width: outerWidth,\n      height: outerHeight,\n      margin: margin\n    }, React.createElement(SankeyLinks, _extends({\n      links: data.links,\n      linkContract: linkContract,\n      linkOpacity: linkOpacity,\n      linkHoverOpacity: linkHoverOpacity,\n      linkHoverOthersOpacity: linkHoverOthersOpacity,\n      showTooltip: showTooltip,\n      hideTooltip: hideTooltip,\n      setCurrentLink: setCurrentLink,\n      currentNode: currentNode,\n      currentLink: currentLink,\n      isCurrentLink: isCurrentLink,\n      onClick: onClick,\n      tooltip: linkTooltip,\n      theme: theme,\n      tooltipFormat: tooltipFormat\n    }, motionProps)), React.createElement(SankeyNodes, _extends({\n      nodes: data.nodes,\n      nodePaddingX: nodePaddingX,\n      nodeOpacity: nodeOpacity,\n      nodeHoverOpacity: nodeHoverOpacity,\n      nodeHoverOthersOpacity: nodeHoverOthersOpacity,\n      nodeBorderWidth: nodeBorderWidth,\n      getNodeBorderColor: getNodeBorderColor,\n      showTooltip: showTooltip,\n      hideTooltip: hideTooltip,\n      setCurrentNode: setCurrentNode,\n      currentNode: currentNode,\n      currentLink: currentLink,\n      isCurrentNode: isCurrentNode,\n      onClick: onClick,\n      tooltip: nodeTooltip,\n      theme: theme,\n      tooltipFormat: tooltipFormat\n    }, motionProps)), enableLabels && React.createElement(SankeyLabels, _extends({\n      nodes: data.nodes,\n      width: width,\n      labelPosition: labelPosition,\n      labelPadding: labelPadding,\n      labelOrientation: labelOrientation,\n      getLabelTextColor: getLabelTextColor,\n      theme: theme\n    }, motionProps)));\n  });\n};\n\nSankey.propTypes = SankeyPropTypes;\nexport default enhance(Sankey);","map":{"version":3,"sources":["/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/node_modules/nivo/es/components/charts/sankey/Sankey.js"],"names":["_uniq","_cloneDeep","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","React","sankey","d3Sankey","sankeyAlignmentFromProp","SvgWrapper","SankeyNodes","SankeyLinks","SankeyLabels","Container","SankeyPropTypes","enhance","getId","d","id","Sankey","_ref","_data","data","align","margin","width","height","outerWidth","outerHeight","nodeOpacity","nodeHoverOpacity","nodeHoverOthersOpacity","nodeWidth","nodePaddingX","nodePaddingY","nodeBorderWidth","getNodeBorderColor","setCurrentNode","currentNode","linkOpacity","linkHoverOpacity","linkHoverOthersOpacity","linkContract","getLinkColor","setCurrentLink","currentLink","enableLabels","getLabel","labelPosition","labelPadding","labelOrientation","getLabelTextColor","theme","getColor","nodeTooltip","linkTooltip","animate","motionDamping","motionStiffness","isInteractive","onClick","tooltipFormat","nodeAlign","nodePadding","size","nodeId","nodes","forEach","node","color","label","x","x0","y","y0","Math","max","x1","y1","links","link","motionProps","isCurrentNode","isCurrentLink","_ref2","_ref3","currentNodeIds","filter","_ref4","_ref5","push","_ref6","includes","_ref7","createElement","_ref8","showTooltip","hideTooltip","tooltip","propTypes"],"mappings":"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","sourcesContent":["import _uniq from 'lodash/uniq';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphaël Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React from 'react';\n\nimport { sankey as d3Sankey } from 'd3-sankey';\nimport { sankeyAlignmentFromProp } from '../../../props';\nimport SvgWrapper from '../SvgWrapper';\nimport SankeyNodes from './SankeyNodes';\nimport SankeyLinks from './SankeyLinks';\nimport SankeyLabels from './SankeyLabels';\nimport Container from '../Container';\nimport { SankeyPropTypes } from './props';\nimport enhance from './enhance';\n\nvar getId = function getId(d) {\n    return d.id;\n};\n\nvar Sankey = function Sankey(_ref) {\n    var _data = _ref.data,\n        align = _ref.align,\n        margin = _ref.margin,\n        width = _ref.width,\n        height = _ref.height,\n        outerWidth = _ref.outerWidth,\n        outerHeight = _ref.outerHeight,\n        nodeOpacity = _ref.nodeOpacity,\n        nodeHoverOpacity = _ref.nodeHoverOpacity,\n        nodeHoverOthersOpacity = _ref.nodeHoverOthersOpacity,\n        nodeWidth = _ref.nodeWidth,\n        nodePaddingX = _ref.nodePaddingX,\n        nodePaddingY = _ref.nodePaddingY,\n        nodeBorderWidth = _ref.nodeBorderWidth,\n        getNodeBorderColor = _ref.getNodeBorderColor,\n        setCurrentNode = _ref.setCurrentNode,\n        currentNode = _ref.currentNode,\n        linkOpacity = _ref.linkOpacity,\n        linkHoverOpacity = _ref.linkHoverOpacity,\n        linkHoverOthersOpacity = _ref.linkHoverOthersOpacity,\n        linkContract = _ref.linkContract,\n        getLinkColor = _ref.getLinkColor,\n        setCurrentLink = _ref.setCurrentLink,\n        currentLink = _ref.currentLink,\n        enableLabels = _ref.enableLabels,\n        getLabel = _ref.getLabel,\n        labelPosition = _ref.labelPosition,\n        labelPadding = _ref.labelPadding,\n        labelOrientation = _ref.labelOrientation,\n        getLabelTextColor = _ref.getLabelTextColor,\n        theme = _ref.theme,\n        getColor = _ref.getColor,\n        nodeTooltip = _ref.nodeTooltip,\n        linkTooltip = _ref.linkTooltip,\n        animate = _ref.animate,\n        motionDamping = _ref.motionDamping,\n        motionStiffness = _ref.motionStiffness,\n        isInteractive = _ref.isInteractive,\n        onClick = _ref.onClick,\n        tooltipFormat = _ref.tooltipFormat;\n\n    var sankey = d3Sankey().nodeAlign(sankeyAlignmentFromProp(align)).nodeWidth(nodeWidth).nodePadding(nodePaddingY).size([width, height]).nodeId(getId);\n\n    // deep clone is required as the sankey diagram mutates data\n    var data = _cloneDeep(_data);\n    sankey(data);\n\n    data.nodes.forEach(function (node) {\n        node.color = getColor(node);\n        node.label = getLabel(node);\n        node.x = node.x0 + nodePaddingX;\n        node.y = node.y0;\n        node.width = Math.max(node.x1 - node.x0 - nodePaddingX * 2, 0);\n        node.height = Math.max(node.y1 - node.y0, 0);\n    });\n\n    data.links.forEach(function (link) {\n        link.color = getLinkColor(link);\n    });\n\n    var motionProps = {\n        animate: animate,\n        motionDamping: motionDamping,\n        motionStiffness: motionStiffness\n    };\n\n    var isCurrentNode = function isCurrentNode() {\n        return false;\n    };\n    var isCurrentLink = function isCurrentLink() {\n        return false;\n    };\n\n    if (currentLink) {\n        isCurrentNode = function isCurrentNode(_ref2) {\n            var id = _ref2.id;\n            return id === currentLink.source.id || id === currentLink.target.id;\n        };\n        isCurrentLink = function isCurrentLink(_ref3) {\n            var source = _ref3.source,\n                target = _ref3.target;\n            return source.id === currentLink.source.id && target.id === currentLink.target.id;\n        };\n    }\n\n    if (currentNode) {\n        var currentNodeIds = [currentNode.id];\n        data.links.filter(function (_ref4) {\n            var source = _ref4.source,\n                target = _ref4.target;\n            return source.id === currentNode.id || target.id === currentNode.id;\n        }).forEach(function (_ref5) {\n            var source = _ref5.source,\n                target = _ref5.target;\n\n            currentNodeIds.push(source.id);\n            currentNodeIds.push(target.id);\n        });\n\n        currentNodeIds = _uniq(currentNodeIds);\n        isCurrentNode = function isCurrentNode(_ref6) {\n            var id = _ref6.id;\n            return currentNodeIds.includes(id);\n        };\n        isCurrentLink = function isCurrentLink(_ref7) {\n            var source = _ref7.source,\n                target = _ref7.target;\n            return source.id === currentNode.id || target.id === currentNode.id;\n        };\n    }\n\n    return React.createElement(\n        Container,\n        { isInteractive: isInteractive, theme: theme },\n        function (_ref8) {\n            var showTooltip = _ref8.showTooltip,\n                hideTooltip = _ref8.hideTooltip;\n            return React.createElement(\n                SvgWrapper,\n                { width: outerWidth, height: outerHeight, margin: margin },\n                React.createElement(SankeyLinks, _extends({\n                    links: data.links,\n                    linkContract: linkContract,\n                    linkOpacity: linkOpacity,\n                    linkHoverOpacity: linkHoverOpacity,\n                    linkHoverOthersOpacity: linkHoverOthersOpacity,\n                    showTooltip: showTooltip,\n                    hideTooltip: hideTooltip,\n                    setCurrentLink: setCurrentLink,\n                    currentNode: currentNode,\n                    currentLink: currentLink,\n                    isCurrentLink: isCurrentLink,\n                    onClick: onClick,\n                    tooltip: linkTooltip,\n                    theme: theme,\n                    tooltipFormat: tooltipFormat\n                }, motionProps)),\n                React.createElement(SankeyNodes, _extends({\n                    nodes: data.nodes,\n                    nodePaddingX: nodePaddingX,\n                    nodeOpacity: nodeOpacity,\n                    nodeHoverOpacity: nodeHoverOpacity,\n                    nodeHoverOthersOpacity: nodeHoverOthersOpacity,\n                    nodeBorderWidth: nodeBorderWidth,\n                    getNodeBorderColor: getNodeBorderColor,\n                    showTooltip: showTooltip,\n                    hideTooltip: hideTooltip,\n                    setCurrentNode: setCurrentNode,\n                    currentNode: currentNode,\n                    currentLink: currentLink,\n                    isCurrentNode: isCurrentNode,\n                    onClick: onClick,\n                    tooltip: nodeTooltip,\n                    theme: theme,\n                    tooltipFormat: tooltipFormat\n                }, motionProps)),\n                enableLabels && React.createElement(SankeyLabels, _extends({\n                    nodes: data.nodes,\n                    width: width,\n                    labelPosition: labelPosition,\n                    labelPadding: labelPadding,\n                    labelOrientation: labelOrientation,\n                    getLabelTextColor: getLabelTextColor,\n                    theme: theme\n                }, motionProps))\n            );\n        }\n    );\n};\n\nSankey.propTypes = SankeyPropTypes;\n\nexport default enhance(Sankey);"]},"metadata":{},"sourceType":"module"}