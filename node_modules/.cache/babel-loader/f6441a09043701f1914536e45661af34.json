{"ast":null,"code":"var _jsxFileName=\"/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/src/components/Diagrams/PieChart.jsx\";import React from'react';import useSWR from'swr';import ChartistGraph from\"react-chartist\";import Legend from\"chartist-plugin-legend\";import{Spinner}from\"react-bootstrap\";/**\n * Creates a\n * @param data\n * @returns {{labels: Array, series: Array}}\n */function create_labels_and_series(data){let labels=[];let series=[];for(let key in data){if(data.hasOwnProperty(key)){labels.push(key);series.push(data[key]);}}return{labels:labels,series:series};}/**\n * Fetches the data from a given url andcCreates a ChartistGraph pie chart with the data.\n * @param dataUrl: the url from which the data will be fetched.\n * @param labelOffset: offset of the labels.\n * @returns {*}\n * @constructor\n */function PieChart({dataUrl,labelOffset}){const{data,error}=useSWR(dataUrl);if(error)return/*#__PURE__*/React.createElement(\"h1\",{__self:this,__source:{fileName:_jsxFileName,lineNumber:33,columnNumber:21}},\"Something went wrong!\");if(!data)return/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",variant:\"primary\",size:\"mg\",__self:this,__source:{fileName:_jsxFileName,lineNumber:34,columnNumber:21}});const pieData=create_labels_and_series(data.number_of_firmware_by_android_version);const plugins=[Legend({position:'top'})];const sum=function(a,b){return a+b;};const total=pieData.series.reduce(sum);return/*#__PURE__*/React.createElement(ChartistGraph,{options:{chartPadding:0,labelOffset:labelOffset,labelDirection:'explode',plugins,labelInterpolationFnc:function(label){const index=pieData.labels.indexOf(label);return Math.round(pieData.series[index].value/total*100)+'%';}},data:pieData,type:\"Pie\",__self:this,__source:{fileName:_jsxFileName,lineNumber:39,columnNumber:10}});}export default PieChart;","map":{"version":3,"sources":["/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/src/components/Diagrams/PieChart.jsx"],"names":["React","useSWR","ChartistGraph","Legend","Spinner","create_labels_and_series","data","labels","series","key","hasOwnProperty","push","PieChart","dataUrl","labelOffset","error","pieData","number_of_firmware_by_android_version","plugins","position","sum","a","b","total","reduce","chartPadding","labelDirection","labelInterpolationFnc","label","index","indexOf","Math","round","value"],"mappings":"wIAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,KAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,gBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAEA;;;;GAKA,QAASC,CAAAA,wBAAT,CAAkCC,IAAlC,CAAuC,CACrC,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA,IAAK,GAAIC,CAAAA,GAAT,GAAgBH,CAAAA,IAAhB,CAAsB,CACpB,GAAIA,IAAI,CAACI,cAAL,CAAoBD,GAApB,CAAJ,CAA8B,CAC5BF,MAAM,CAACI,IAAP,CAAYF,GAAZ,EACAD,MAAM,CAACG,IAAP,CAAYL,IAAI,CAACG,GAAD,CAAhB,EACD,CACF,CACD,MAAO,CAACF,MAAM,CAAEA,MAAT,CAAiBC,MAAM,CAAEA,MAAzB,CAAP,CACD,CAED;;;;;;GAOA,QAASI,CAAAA,QAAT,CAAkB,CAACC,OAAD,CAAUC,WAAV,CAAlB,CAA0C,CACxC,KAAM,CAAER,IAAF,CAAQS,KAAR,EAAkBd,MAAM,CAACY,OAAD,CAA9B,CACA,GAAIE,KAAJ,CAAW,mBAAO,8HAAP,CACX,GAAI,CAACT,IAAL,CAAW,mBAAO,oBAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,OAAO,CAAC,SAApC,CAA8C,IAAI,CAAC,IAAnD,6EAAP,CACX,KAAMU,CAAAA,OAAO,CAAGX,wBAAwB,CAACC,IAAI,CAACW,qCAAN,CAAxC,CACA,KAAMC,CAAAA,OAAO,CAAG,CAACf,MAAM,CAAC,CAACgB,QAAQ,CAAE,KAAX,CAAD,CAAP,CAAhB,CACA,KAAMC,CAAAA,GAAG,CAAG,SAASC,CAAT,CAAYC,CAAZ,CAAe,CAAE,MAAOD,CAAAA,CAAC,CAAGC,CAAX,CAAc,CAA3C,CACA,KAAMC,CAAAA,KAAK,CAAGP,OAAO,CAACR,MAAR,CAAegB,MAAf,CAAsBJ,GAAtB,CAAd,CACA,mBAAO,oBAAC,aAAD,EACG,OAAO,CACP,CACEK,YAAY,CAAE,CADhB,CAEEX,WAAW,CAAEA,WAFf,CAGEY,cAAc,CAAE,SAHlB,CAIER,OAJF,CAKES,qBAAqB,CAAE,SAASC,KAAT,CAAgB,CACrC,KAAMC,CAAAA,KAAK,CAAGb,OAAO,CAACT,MAAR,CAAeuB,OAAf,CAAuBF,KAAvB,CAAd,CACA,MAAOG,CAAAA,IAAI,CAACC,KAAL,CAAWhB,OAAO,CAACR,MAAR,CAAeqB,KAAf,EAAsBI,KAAtB,CAA8BV,KAA9B,CAAsC,GAAjD,EAAwD,GAA/D,CACD,CARH,CAFH,CAaG,IAAI,CAAEP,OAbT,CAcG,IAAI,CAAC,KAdR,6EAAP,CAeD,CAED,cAAeJ,CAAAA,QAAf","sourcesContent":["import React from 'react';\nimport useSWR from 'swr';\nimport ChartistGraph from \"react-chartist\";\nimport Legend from \"chartist-plugin-legend\";\nimport { Spinner } from \"react-bootstrap\";\n\n/**\n * Creates a\n * @param data\n * @returns {{labels: Array, series: Array}}\n */\nfunction create_labels_and_series(data){\n  let labels = [];\n  let series = [];\n  for (let key in data) {\n    if (data.hasOwnProperty(key)) {\n      labels.push(key);\n      series.push(data[key]);\n    }\n  }\n  return {labels: labels, series: series}\n}\n\n/**\n * Fetches the data from a given url andcCreates a ChartistGraph pie chart with the data.\n * @param dataUrl: the url from which the data will be fetched.\n * @param labelOffset: offset of the labels.\n * @returns {*}\n * @constructor\n */\nfunction PieChart({dataUrl, labelOffset}) {\n  const { data, error } = useSWR(dataUrl);\n  if (error) return <h1>Something went wrong!</h1>;\n  if (!data) return <Spinner animation=\"border\" variant=\"primary\" size=\"mg\"/>;\n  const pieData = create_labels_and_series(data.number_of_firmware_by_android_version);\n  const plugins = [Legend({position: 'top'})];\n  const sum = function(a, b) { return a + b };\n  const total = pieData.series.reduce(sum);\n  return <ChartistGraph\n            options={\n            {\n              chartPadding: 0,\n              labelOffset: labelOffset,\n              labelDirection: 'explode',\n              plugins,\n              labelInterpolationFnc: function(label) {\n                const index = pieData.labels.indexOf(label);\n                return Math.round(pieData.series[index].value / total * 100) + '%';\n              }\n            }\n          }\n            data={pieData}\n            type=\"Pie\"/>;\n}\n\nexport default PieChart;\n"]},"metadata":{},"sourceType":"module"}