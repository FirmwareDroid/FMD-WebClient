{"ast":null,"code":"import _partial from 'lodash/partial';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphaël Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\n\nimport React, { Component } from 'react';\nimport { midAngle, getPolarLabelProps, degreesToRadians } from '../../../lib/polar';\nimport { getRelativeCursor, getHoveredArc } from '../../../lib/interactivity';\nimport Container from '../Container';\nimport { ChordPropTypes } from './props';\nimport enhance from './enhance';\nimport ChordArcTooltip from './ChordArcTooltip';\n\nvar ChordCanvas = function (_Component) {\n  _inherits(ChordCanvas, _Component);\n\n  function ChordCanvas() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ChordCanvas);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.handleMouseHover = function (showTooltip, hideTooltip, event) {\n      if (_this.props.isInteractive !== true) return;\n\n      var _getRelativeCursor = getRelativeCursor(_this.surface, event),\n          x = _getRelativeCursor[0],\n          y = _getRelativeCursor[1];\n\n      var _this$props = _this.props,\n          width = _this$props.width,\n          height = _this$props.height,\n          margin = _this$props.margin,\n          radius = _this$props.radius,\n          innerRadius = _this$props.innerRadius,\n          arcs = _this$props.arcs,\n          setCurrentArc = _this$props.setCurrentArc,\n          theme = _this$props.theme;\n      var centerX = width / 2 + margin.left;\n      var centerY = height / 2 + margin.top;\n      var arc = getHoveredArc(centerX, centerY, radius, innerRadius, arcs, x, y);\n\n      if (arc) {\n        setCurrentArc(arc);\n        showTooltip(React.createElement(ChordArcTooltip, {\n          arc: arc,\n          theme: theme\n        }), event);\n      } else {\n        setCurrentArc(null);\n        hideTooltip();\n      }\n    }, _this.handleMouseLeave = function (hideTooltip) {\n      if (_this.props.isInteractive !== true) return;\n\n      _this.props.setCurrentArc(null);\n\n      hideTooltip();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  ChordCanvas.prototype.componentDidMount = function componentDidMount() {\n    this.ctx = this.surface.getContext('2d');\n    this.draw(this.props);\n  };\n\n  ChordCanvas.prototype.shouldComponentUpdate = function shouldComponentUpdate(props) {\n    if (this.props.outerWidth !== props.outerWidth || this.props.outerHeight !== props.outerHeight || this.props.isInteractive !== props.isInteractive || this.props.theme !== props.theme) {\n      return true;\n    } else {\n      this.draw(props);\n      return false;\n    }\n  };\n\n  ChordCanvas.prototype.componentDidUpdate = function componentDidUpdate() {\n    this.ctx = this.surface.getContext('2d');\n    this.draw(this.props);\n  };\n\n  ChordCanvas.prototype.draw = function draw(props) {\n    var _this2 = this;\n\n    var pixelRatio = props.pixelRatio,\n        width = props.width,\n        height = props.height,\n        margin = props.margin,\n        outerWidth = props.outerWidth,\n        outerHeight = props.outerHeight,\n        enableLabel = props.enableLabel,\n        getLabel = props.getLabel,\n        labelOffset = props.labelOffset,\n        labelRotation = props.labelRotation,\n        getLabelTextColor = props.getLabelTextColor,\n        arcGenerator = props.arcGenerator,\n        ribbonGenerator = props.ribbonGenerator,\n        theme = props.theme,\n        ribbons = props.ribbons,\n        arcs = props.arcs,\n        radius = props.radius,\n        getArcOpacity = props.getArcOpacity,\n        getRibbonOpacity = props.getRibbonOpacity;\n    this.surface.width = outerWidth * pixelRatio;\n    this.surface.height = outerHeight * pixelRatio;\n    this.ctx.scale(pixelRatio, pixelRatio);\n    var centerX = width / 2 + margin.left;\n    var centerY = height / 2 + margin.top;\n    this.ctx.clearRect(0, 0, outerWidth, outerHeight);\n    this.ctx.translate(centerX, centerY);\n    ribbonGenerator.context(this.ctx);\n    ribbons.forEach(function (ribbon) {\n      _this2.ctx.save();\n\n      _this2.ctx.globalAlpha = getRibbonOpacity(ribbon);\n\n      _this2.ctx.beginPath();\n\n      ribbonGenerator(ribbon);\n      _this2.ctx.fillStyle = ribbon.source.color;\n\n      _this2.ctx.fill();\n\n      _this2.ctx.restore();\n    });\n    arcGenerator.context(this.ctx);\n    arcs.forEach(function (arc) {\n      _this2.ctx.save();\n\n      _this2.ctx.globalAlpha = getArcOpacity(arc);\n\n      _this2.ctx.beginPath();\n\n      arcGenerator(arc);\n      _this2.ctx.fillStyle = arc.color;\n\n      _this2.ctx.fill();\n\n      _this2.ctx.restore();\n\n      if (enableLabel) {\n        var labelTextColor = getLabelTextColor(arc, theme);\n        var angle = midAngle(arc);\n\n        var _props = getPolarLabelProps(radius + labelOffset, angle, labelRotation);\n\n        _this2.ctx.save();\n\n        _this2.ctx.translate(_props.x, _props.y);\n\n        _this2.ctx.rotate(degreesToRadians(_props.rotate));\n\n        _this2.ctx.textAlign = _props.align;\n        _this2.ctx.textBaseline = _props.baseline;\n        _this2.ctx.fillStyle = labelTextColor;\n\n        _this2.ctx.fillText(getLabel(arc), 0, 0);\n\n        _this2.ctx.restore();\n      }\n    });\n  };\n\n  ChordCanvas.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props2 = this.props,\n        outerWidth = _props2.outerWidth,\n        outerHeight = _props2.outerHeight,\n        pixelRatio = _props2.pixelRatio,\n        isInteractive = _props2.isInteractive,\n        theme = _props2.theme;\n    return React.createElement(Container, {\n      isInteractive: isInteractive,\n      theme: theme\n    }, function (_ref) {\n      var showTooltip = _ref.showTooltip,\n          hideTooltip = _ref.hideTooltip;\n      return React.createElement('canvas', {\n        ref: function ref(surface) {\n          _this3.surface = surface;\n        },\n        width: outerWidth * pixelRatio,\n        height: outerHeight * pixelRatio,\n        style: {\n          width: outerWidth,\n          height: outerHeight\n        },\n        onMouseEnter: _partial(_this3.handleMouseHover, showTooltip, hideTooltip),\n        onMouseMove: _partial(_this3.handleMouseHover, showTooltip, hideTooltip),\n        onMouseLeave: _partial(_this3.handleMouseLeave, hideTooltip)\n      });\n    });\n  };\n\n  return ChordCanvas;\n}(Component);\n\nChordCanvas.propTypes = ChordPropTypes;\nexport default enhance(ChordCanvas);","map":{"version":3,"sources":["/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/node_modules/nivo/es/components/charts/chord/ChordCanvas.js"],"names":["_partial","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","Component","midAngle","getPolarLabelProps","degreesToRadians","getRelativeCursor","getHoveredArc","Container","ChordPropTypes","enhance","ChordArcTooltip","ChordCanvas","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","apply","concat","handleMouseHover","showTooltip","hideTooltip","event","props","isInteractive","_getRelativeCursor","surface","x","y","_this$props","width","height","margin","radius","innerRadius","arcs","setCurrentArc","theme","centerX","left","centerY","top","arc","createElement","handleMouseLeave","componentDidMount","ctx","getContext","draw","shouldComponentUpdate","outerWidth","outerHeight","componentDidUpdate","_this2","pixelRatio","enableLabel","getLabel","labelOffset","labelRotation","getLabelTextColor","arcGenerator","ribbonGenerator","ribbons","getArcOpacity","getRibbonOpacity","scale","clearRect","translate","context","forEach","ribbon","save","globalAlpha","beginPath","fillStyle","source","color","fill","restore","labelTextColor","angle","_props","rotate","textAlign","align","textBaseline","baseline","fillText","render","_this3","_props2","_ref","ref","style","onMouseEnter","onMouseMove","onMouseLeave","propTypes"],"mappings":"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","sourcesContent":["import _partial from 'lodash/partial';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphaël Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { Component } from 'react';\n\nimport { midAngle, getPolarLabelProps, degreesToRadians } from '../../../lib/polar';\nimport { getRelativeCursor, getHoveredArc } from '../../../lib/interactivity';\nimport Container from '../Container';\nimport { ChordPropTypes } from './props';\nimport enhance from './enhance';\nimport ChordArcTooltip from './ChordArcTooltip';\n\nvar ChordCanvas = function (_Component) {\n    _inherits(ChordCanvas, _Component);\n\n    function ChordCanvas() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, ChordCanvas);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.handleMouseHover = function (showTooltip, hideTooltip, event) {\n            if (_this.props.isInteractive !== true) return;\n\n            var _getRelativeCursor = getRelativeCursor(_this.surface, event),\n                x = _getRelativeCursor[0],\n                y = _getRelativeCursor[1];\n\n            var _this$props = _this.props,\n                width = _this$props.width,\n                height = _this$props.height,\n                margin = _this$props.margin,\n                radius = _this$props.radius,\n                innerRadius = _this$props.innerRadius,\n                arcs = _this$props.arcs,\n                setCurrentArc = _this$props.setCurrentArc,\n                theme = _this$props.theme;\n\n\n            var centerX = width / 2 + margin.left;\n            var centerY = height / 2 + margin.top;\n\n            var arc = getHoveredArc(centerX, centerY, radius, innerRadius, arcs, x, y);\n            if (arc) {\n                setCurrentArc(arc);\n                showTooltip(React.createElement(ChordArcTooltip, { arc: arc, theme: theme }), event);\n            } else {\n                setCurrentArc(null);\n                hideTooltip();\n            }\n        }, _this.handleMouseLeave = function (hideTooltip) {\n            if (_this.props.isInteractive !== true) return;\n\n            _this.props.setCurrentArc(null);\n            hideTooltip();\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    ChordCanvas.prototype.componentDidMount = function componentDidMount() {\n        this.ctx = this.surface.getContext('2d');\n        this.draw(this.props);\n    };\n\n    ChordCanvas.prototype.shouldComponentUpdate = function shouldComponentUpdate(props) {\n        if (this.props.outerWidth !== props.outerWidth || this.props.outerHeight !== props.outerHeight || this.props.isInteractive !== props.isInteractive || this.props.theme !== props.theme) {\n            return true;\n        } else {\n            this.draw(props);\n            return false;\n        }\n    };\n\n    ChordCanvas.prototype.componentDidUpdate = function componentDidUpdate() {\n        this.ctx = this.surface.getContext('2d');\n        this.draw(this.props);\n    };\n\n    ChordCanvas.prototype.draw = function draw(props) {\n        var _this2 = this;\n\n        var pixelRatio = props.pixelRatio,\n            width = props.width,\n            height = props.height,\n            margin = props.margin,\n            outerWidth = props.outerWidth,\n            outerHeight = props.outerHeight,\n            enableLabel = props.enableLabel,\n            getLabel = props.getLabel,\n            labelOffset = props.labelOffset,\n            labelRotation = props.labelRotation,\n            getLabelTextColor = props.getLabelTextColor,\n            arcGenerator = props.arcGenerator,\n            ribbonGenerator = props.ribbonGenerator,\n            theme = props.theme,\n            ribbons = props.ribbons,\n            arcs = props.arcs,\n            radius = props.radius,\n            getArcOpacity = props.getArcOpacity,\n            getRibbonOpacity = props.getRibbonOpacity;\n\n\n        this.surface.width = outerWidth * pixelRatio;\n        this.surface.height = outerHeight * pixelRatio;\n\n        this.ctx.scale(pixelRatio, pixelRatio);\n\n        var centerX = width / 2 + margin.left;\n        var centerY = height / 2 + margin.top;\n\n        this.ctx.clearRect(0, 0, outerWidth, outerHeight);\n        this.ctx.translate(centerX, centerY);\n\n        ribbonGenerator.context(this.ctx);\n        ribbons.forEach(function (ribbon) {\n            _this2.ctx.save();\n            _this2.ctx.globalAlpha = getRibbonOpacity(ribbon);\n\n            _this2.ctx.beginPath();\n            ribbonGenerator(ribbon);\n            _this2.ctx.fillStyle = ribbon.source.color;\n            _this2.ctx.fill();\n\n            _this2.ctx.restore();\n        });\n\n        arcGenerator.context(this.ctx);\n        arcs.forEach(function (arc) {\n            _this2.ctx.save();\n            _this2.ctx.globalAlpha = getArcOpacity(arc);\n\n            _this2.ctx.beginPath();\n            arcGenerator(arc);\n            _this2.ctx.fillStyle = arc.color;\n            _this2.ctx.fill();\n\n            _this2.ctx.restore();\n\n            if (enableLabel) {\n                var labelTextColor = getLabelTextColor(arc, theme);\n                var angle = midAngle(arc);\n                var _props = getPolarLabelProps(radius + labelOffset, angle, labelRotation);\n\n                _this2.ctx.save();\n                _this2.ctx.translate(_props.x, _props.y);\n                _this2.ctx.rotate(degreesToRadians(_props.rotate));\n\n                _this2.ctx.textAlign = _props.align;\n                _this2.ctx.textBaseline = _props.baseline;\n                _this2.ctx.fillStyle = labelTextColor;\n                _this2.ctx.fillText(getLabel(arc), 0, 0);\n\n                _this2.ctx.restore();\n            }\n        });\n    };\n\n    ChordCanvas.prototype.render = function render() {\n        var _this3 = this;\n\n        var _props2 = this.props,\n            outerWidth = _props2.outerWidth,\n            outerHeight = _props2.outerHeight,\n            pixelRatio = _props2.pixelRatio,\n            isInteractive = _props2.isInteractive,\n            theme = _props2.theme;\n\n\n        return React.createElement(\n            Container,\n            { isInteractive: isInteractive, theme: theme },\n            function (_ref) {\n                var showTooltip = _ref.showTooltip,\n                    hideTooltip = _ref.hideTooltip;\n                return React.createElement('canvas', {\n                    ref: function ref(surface) {\n                        _this3.surface = surface;\n                    },\n                    width: outerWidth * pixelRatio,\n                    height: outerHeight * pixelRatio,\n                    style: {\n                        width: outerWidth,\n                        height: outerHeight\n                    },\n                    onMouseEnter: _partial(_this3.handleMouseHover, showTooltip, hideTooltip),\n                    onMouseMove: _partial(_this3.handleMouseHover, showTooltip, hideTooltip),\n                    onMouseLeave: _partial(_this3.handleMouseLeave, hideTooltip)\n                });\n            }\n        );\n    };\n\n    return ChordCanvas;\n}(Component);\n\nChordCanvas.propTypes = ChordPropTypes;\n\nexport default enhance(ChordCanvas);"]},"metadata":{},"sourceType":"module"}