{"ast":null,"code":"import deepEqual from 'fast-deep-equal';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport Cache from './cache'; // cache\n\nvar cache = new Cache(); // state managers\n\nvar CONCURRENT_PROMISES = {};\nvar CONCURRENT_PROMISES_TS = {};\nvar FOCUS_REVALIDATORS = {};\nvar CACHE_REVALIDATORS = {};\nvar MUTATION_TS = {}; // error retry\n\nfunction onErrorRetry(_, __, config, revalidate, opts) {\n  if (!isDocumentVisible()) {\n    // if it's hidden, stop\n    // it will auto revalidate when focus\n    return;\n  }\n\n  if (config.errorRetryCount && opts.retryCount > config.errorRetryCount) {\n    return;\n  } // exponential backoff\n\n\n  var count = Math.min(opts.retryCount || 0, 8);\n  var timeout = ~~((Math.random() + 0.5) * (1 << count)) * config.errorRetryInterval;\n  setTimeout(revalidate, timeout, opts);\n} // client side: need to adjust the config\n// based on the browser status\n// slow connection (<= 70Kbps)\n\n\nvar slowConnection = typeof window !== 'undefined' && navigator['connection'] && ['slow-2g', '2g'].indexOf(navigator['connection'].effectiveType) !== -1; // config\n\nvar defaultConfig = {\n  // events\n  onLoadingSlow: function () {},\n  onSuccess: function () {},\n  onError: function () {},\n  onErrorRetry: onErrorRetry,\n  errorRetryInterval: (slowConnection ? 10 : 5) * 1000,\n  focusThrottleInterval: 5 * 1000,\n  dedupingInterval: 2 * 1000,\n  loadingTimeout: (slowConnection ? 5 : 3) * 1000,\n  refreshInterval: 0,\n  revalidateOnFocus: true,\n  revalidateOnReconnect: true,\n  refreshWhenHidden: false,\n  refreshWhenOffline: false,\n  shouldRetryOnError: true,\n  suspense: false,\n  compare: deepEqual\n}; // Focus revalidate\n\nvar eventsBinded = false;\n\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n  var revalidate = function () {\n    if (!isDocumentVisible() || !isOnline()) return;\n\n    for (var key in FOCUS_REVALIDATORS) {\n      if (FOCUS_REVALIDATORS[key][0]) FOCUS_REVALIDATORS[key][0]();\n    }\n  };\n\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false); // only bind the events once\n\n  eventsBinded = true;\n}\n\nexport { CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, CACHE_REVALIDATORS, MUTATION_TS, cache };\nexport default defaultConfig;","map":{"version":3,"sources":["/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/node_modules/swr/esm/config.js"],"names":["deepEqual","isDocumentVisible","isOnline","Cache","cache","CONCURRENT_PROMISES","CONCURRENT_PROMISES_TS","FOCUS_REVALIDATORS","CACHE_REVALIDATORS","MUTATION_TS","onErrorRetry","_","__","config","revalidate","opts","errorRetryCount","retryCount","count","Math","min","timeout","random","errorRetryInterval","setTimeout","slowConnection","window","navigator","indexOf","effectiveType","defaultConfig","onLoadingSlow","onSuccess","onError","focusThrottleInterval","dedupingInterval","loadingTimeout","refreshInterval","revalidateOnFocus","revalidateOnReconnect","refreshWhenHidden","refreshWhenOffline","shouldRetryOnError","suspense","compare","eventsBinded","addEventListener","key"],"mappings":"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","sourcesContent":["import deepEqual from 'fast-deep-equal';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport Cache from './cache';\n// cache\nvar cache = new Cache();\n// state managers\nvar CONCURRENT_PROMISES = {};\nvar CONCURRENT_PROMISES_TS = {};\nvar FOCUS_REVALIDATORS = {};\nvar CACHE_REVALIDATORS = {};\nvar MUTATION_TS = {};\n// error retry\nfunction onErrorRetry(_, __, config, revalidate, opts) {\n    if (!isDocumentVisible()) {\n        // if it's hidden, stop\n        // it will auto revalidate when focus\n        return;\n    }\n    if (config.errorRetryCount && opts.retryCount > config.errorRetryCount) {\n        return;\n    }\n    // exponential backoff\n    var count = Math.min(opts.retryCount || 0, 8);\n    var timeout = ~~((Math.random() + 0.5) * (1 << count)) * config.errorRetryInterval;\n    setTimeout(revalidate, timeout, opts);\n}\n// client side: need to adjust the config\n// based on the browser status\n// slow connection (<= 70Kbps)\nvar slowConnection = typeof window !== 'undefined' &&\n    navigator['connection'] &&\n    ['slow-2g', '2g'].indexOf(navigator['connection'].effectiveType) !== -1;\n// config\nvar defaultConfig = {\n    // events\n    onLoadingSlow: function () { },\n    onSuccess: function () { },\n    onError: function () { },\n    onErrorRetry: onErrorRetry,\n    errorRetryInterval: (slowConnection ? 10 : 5) * 1000,\n    focusThrottleInterval: 5 * 1000,\n    dedupingInterval: 2 * 1000,\n    loadingTimeout: (slowConnection ? 5 : 3) * 1000,\n    refreshInterval: 0,\n    revalidateOnFocus: true,\n    revalidateOnReconnect: true,\n    refreshWhenHidden: false,\n    refreshWhenOffline: false,\n    shouldRetryOnError: true,\n    suspense: false,\n    compare: deepEqual\n};\n// Focus revalidate\nvar eventsBinded = false;\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n    var revalidate = function () {\n        if (!isDocumentVisible() || !isOnline())\n            return;\n        for (var key in FOCUS_REVALIDATORS) {\n            if (FOCUS_REVALIDATORS[key][0])\n                FOCUS_REVALIDATORS[key][0]();\n        }\n    };\n    window.addEventListener('visibilitychange', revalidate, false);\n    window.addEventListener('focus', revalidate, false);\n    // only bind the events once\n    eventsBinded = true;\n}\nexport { CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, CACHE_REVALIDATORS, MUTATION_TS, cache };\nexport default defaultConfig;\n"]},"metadata":{},"sourceType":"module"}