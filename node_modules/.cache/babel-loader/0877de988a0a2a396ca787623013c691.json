{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, RaphaÃ«l Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\n\nimport React, { Component } from 'react';\nimport { generateGroupedBars, generateStackedBars } from '../../../lib/charts/bar';\nimport { renderAxes } from '../../../lib/canvas/axes';\nimport { getRelativeCursor, isCursorInRect } from '../../../lib/interactivity';\nimport Container from '../Container';\nimport BasicTooltip from '../../tooltip/BasicTooltip';\nimport { BarPropTypes } from './props';\nimport enhance from './enhance';\n\nvar findNodeUnderCursor = function findNodeUnderCursor(nodes, margin, x, y) {\n  return nodes.find(function (node) {\n    return isCursorInRect(node.x + margin.left, node.y + margin.top, node.width, node.height, x, y);\n  });\n};\n\nvar BarCanvas = function (_Component) {\n  _inherits(BarCanvas, _Component);\n\n  function BarCanvas() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, BarCanvas);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.handleMouseHover = function (showTooltip, hideTooltip) {\n      return function (event) {\n        if (!_this.bars) return;\n        var _this$props = _this.props,\n            margin = _this$props.margin,\n            theme = _this$props.theme;\n\n        var _getRelativeCursor = getRelativeCursor(_this.surface, event),\n            x = _getRelativeCursor[0],\n            y = _getRelativeCursor[1];\n\n        var bar = findNodeUnderCursor(_this.bars, margin, x, y);\n\n        if (bar !== undefined) {\n          showTooltip(React.createElement(BasicTooltip, {\n            id: bar.data.id + ' - ' + bar.data.indexValue,\n            value: bar.data.value,\n            enableChip: true,\n            color: bar.color,\n            theme: theme\n          }), event);\n        } else {\n          hideTooltip();\n        }\n      };\n    }, _this.handleMouseLeave = function (hideTooltip) {\n      return function () {\n        hideTooltip();\n      };\n    }, _this.handleClick = function (event) {\n      if (!_this.bars) return;\n      var _this$props2 = _this.props,\n          margin = _this$props2.margin,\n          onClick = _this$props2.onClick;\n\n      var _getRelativeCursor2 = getRelativeCursor(_this.surface, event),\n          x = _getRelativeCursor2[0],\n          y = _getRelativeCursor2[1];\n\n      var node = findNodeUnderCursor(_this.bars, margin, x, y);\n      if (node !== undefined) onClick(node.data, event);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  BarCanvas.prototype.componentDidMount = function componentDidMount() {\n    this.ctx = this.surface.getContext('2d');\n    this.draw(this.props);\n  };\n\n  BarCanvas.prototype.shouldComponentUpdate = function shouldComponentUpdate(props) {\n    if (this.props.outerWidth !== props.outerWidth || this.props.outerHeight !== props.outerHeight || this.props.isInteractive !== props.isInteractive || this.props.theme !== props.theme) {\n      return true;\n    } else {\n      this.draw(props);\n      return false;\n    }\n  };\n\n  BarCanvas.prototype.componentDidUpdate = function componentDidUpdate() {\n    this.ctx = this.surface.getContext('2d');\n    this.draw(this.props);\n  };\n\n  BarCanvas.prototype.draw = function draw(props) {\n    var _this2 = this;\n\n    var data = props.data,\n        keys = props.keys,\n        getIndex = props.getIndex,\n        minValue = props.minValue,\n        maxValue = props.maxValue,\n        width = props.width,\n        height = props.height,\n        outerWidth = props.outerWidth,\n        outerHeight = props.outerHeight,\n        pixelRatio = props.pixelRatio,\n        margin = props.margin,\n        layout = props.layout,\n        reverse = props.reverse,\n        groupMode = props.groupMode,\n        padding = props.padding,\n        innerPadding = props.innerPadding,\n        axisTop = props.axisTop,\n        axisRight = props.axisRight,\n        axisBottom = props.axisBottom,\n        axisLeft = props.axisLeft,\n        getColor = props.getColor;\n    this.surface.width = outerWidth * pixelRatio;\n    this.surface.height = outerHeight * pixelRatio;\n    this.ctx.scale(pixelRatio, pixelRatio);\n    var options = {\n      layout: layout,\n      reverse: reverse,\n      data: data,\n      getIndex: getIndex,\n      keys: keys,\n      minValue: minValue,\n      maxValue: maxValue,\n      width: width,\n      height: height,\n      getColor: getColor,\n      padding: padding,\n      innerPadding: innerPadding\n    };\n    var result = groupMode === 'grouped' ? generateGroupedBars(options) : generateStackedBars(options);\n    this.bars = result.bars;\n    this.ctx.clearRect(0, 0, outerWidth, outerHeight);\n    this.ctx.translate(margin.left, margin.top);\n    renderAxes(this.ctx, {\n      xScale: result.xScale,\n      yScale: result.yScale,\n      width: width,\n      height: height,\n      top: axisTop,\n      right: axisRight,\n      bottom: axisBottom,\n      left: axisLeft\n    });\n    result.bars.forEach(function (_ref) {\n      var x = _ref.x,\n          y = _ref.y,\n          color = _ref.color,\n          width = _ref.width,\n          height = _ref.height;\n      _this2.ctx.fillStyle = color;\n\n      _this2.ctx.fillRect(x, y, width, height);\n    });\n  };\n\n  BarCanvas.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props = this.props,\n        outerWidth = _props.outerWidth,\n        outerHeight = _props.outerHeight,\n        pixelRatio = _props.pixelRatio,\n        isInteractive = _props.isInteractive,\n        theme = _props.theme;\n    return React.createElement(Container, {\n      isInteractive: isInteractive,\n      theme: theme\n    }, function (_ref2) {\n      var showTooltip = _ref2.showTooltip,\n          hideTooltip = _ref2.hideTooltip;\n      return React.createElement('canvas', {\n        ref: function ref(surface) {\n          _this3.surface = surface;\n        },\n        width: outerWidth * pixelRatio,\n        height: outerHeight * pixelRatio,\n        style: {\n          width: outerWidth,\n          height: outerHeight\n        },\n        onMouseEnter: _this3.handleMouseHover(showTooltip, hideTooltip),\n        onMouseMove: _this3.handleMouseHover(showTooltip, hideTooltip),\n        onMouseLeave: _this3.handleMouseLeave(hideTooltip),\n        onClick: _this3.handleClick\n      });\n    });\n  };\n\n  return BarCanvas;\n}(Component);\n\nBarCanvas.propTypes = BarPropTypes;\nexport default enhance(BarCanvas);","map":{"version":3,"sources":["/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/node_modules/nivo/es/components/charts/bar/BarCanvas.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","Component","generateGroupedBars","generateStackedBars","renderAxes","getRelativeCursor","isCursorInRect","Container","BasicTooltip","BarPropTypes","enhance","findNodeUnderCursor","nodes","margin","x","y","find","node","left","top","width","height","BarCanvas","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","apply","concat","handleMouseHover","showTooltip","hideTooltip","event","bars","_this$props","props","theme","_getRelativeCursor","surface","bar","undefined","createElement","id","data","indexValue","enableChip","color","handleMouseLeave","handleClick","_this$props2","onClick","_getRelativeCursor2","componentDidMount","ctx","getContext","draw","shouldComponentUpdate","outerWidth","outerHeight","isInteractive","componentDidUpdate","_this2","keys","getIndex","minValue","maxValue","pixelRatio","layout","reverse","groupMode","padding","innerPadding","axisTop","axisRight","axisBottom","axisLeft","getColor","scale","options","result","clearRect","translate","xScale","yScale","right","bottom","forEach","_ref","fillStyle","fillRect","render","_this3","_props","_ref2","ref","style","onMouseEnter","onMouseMove","onMouseLeave","propTypes"],"mappings":"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","sourcesContent":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, RaphaÃ«l Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { Component } from 'react';\nimport { generateGroupedBars, generateStackedBars } from '../../../lib/charts/bar';\nimport { renderAxes } from '../../../lib/canvas/axes';\nimport { getRelativeCursor, isCursorInRect } from '../../../lib/interactivity';\nimport Container from '../Container';\nimport BasicTooltip from '../../tooltip/BasicTooltip';\nimport { BarPropTypes } from './props';\nimport enhance from './enhance';\n\nvar findNodeUnderCursor = function findNodeUnderCursor(nodes, margin, x, y) {\n    return nodes.find(function (node) {\n        return isCursorInRect(node.x + margin.left, node.y + margin.top, node.width, node.height, x, y);\n    });\n};\n\nvar BarCanvas = function (_Component) {\n    _inherits(BarCanvas, _Component);\n\n    function BarCanvas() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, BarCanvas);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.handleMouseHover = function (showTooltip, hideTooltip) {\n            return function (event) {\n                if (!_this.bars) return;\n\n                var _this$props = _this.props,\n                    margin = _this$props.margin,\n                    theme = _this$props.theme;\n\n                var _getRelativeCursor = getRelativeCursor(_this.surface, event),\n                    x = _getRelativeCursor[0],\n                    y = _getRelativeCursor[1];\n\n                var bar = findNodeUnderCursor(_this.bars, margin, x, y);\n\n                if (bar !== undefined) {\n                    showTooltip(React.createElement(BasicTooltip, {\n                        id: bar.data.id + ' - ' + bar.data.indexValue,\n                        value: bar.data.value,\n                        enableChip: true,\n                        color: bar.color,\n                        theme: theme\n                    }), event);\n                } else {\n                    hideTooltip();\n                }\n            };\n        }, _this.handleMouseLeave = function (hideTooltip) {\n            return function () {\n                hideTooltip();\n            };\n        }, _this.handleClick = function (event) {\n            if (!_this.bars) return;\n\n            var _this$props2 = _this.props,\n                margin = _this$props2.margin,\n                onClick = _this$props2.onClick;\n\n            var _getRelativeCursor2 = getRelativeCursor(_this.surface, event),\n                x = _getRelativeCursor2[0],\n                y = _getRelativeCursor2[1];\n\n            var node = findNodeUnderCursor(_this.bars, margin, x, y);\n            if (node !== undefined) onClick(node.data, event);\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    BarCanvas.prototype.componentDidMount = function componentDidMount() {\n        this.ctx = this.surface.getContext('2d');\n        this.draw(this.props);\n    };\n\n    BarCanvas.prototype.shouldComponentUpdate = function shouldComponentUpdate(props) {\n        if (this.props.outerWidth !== props.outerWidth || this.props.outerHeight !== props.outerHeight || this.props.isInteractive !== props.isInteractive || this.props.theme !== props.theme) {\n            return true;\n        } else {\n            this.draw(props);\n            return false;\n        }\n    };\n\n    BarCanvas.prototype.componentDidUpdate = function componentDidUpdate() {\n        this.ctx = this.surface.getContext('2d');\n        this.draw(this.props);\n    };\n\n    BarCanvas.prototype.draw = function draw(props) {\n        var _this2 = this;\n\n        var data = props.data,\n            keys = props.keys,\n            getIndex = props.getIndex,\n            minValue = props.minValue,\n            maxValue = props.maxValue,\n            width = props.width,\n            height = props.height,\n            outerWidth = props.outerWidth,\n            outerHeight = props.outerHeight,\n            pixelRatio = props.pixelRatio,\n            margin = props.margin,\n            layout = props.layout,\n            reverse = props.reverse,\n            groupMode = props.groupMode,\n            padding = props.padding,\n            innerPadding = props.innerPadding,\n            axisTop = props.axisTop,\n            axisRight = props.axisRight,\n            axisBottom = props.axisBottom,\n            axisLeft = props.axisLeft,\n            getColor = props.getColor;\n\n\n        this.surface.width = outerWidth * pixelRatio;\n        this.surface.height = outerHeight * pixelRatio;\n\n        this.ctx.scale(pixelRatio, pixelRatio);\n\n        var options = {\n            layout: layout,\n            reverse: reverse,\n            data: data,\n            getIndex: getIndex,\n            keys: keys,\n            minValue: minValue,\n            maxValue: maxValue,\n            width: width,\n            height: height,\n            getColor: getColor,\n            padding: padding,\n            innerPadding: innerPadding\n        };\n\n        var result = groupMode === 'grouped' ? generateGroupedBars(options) : generateStackedBars(options);\n\n        this.bars = result.bars;\n\n        this.ctx.clearRect(0, 0, outerWidth, outerHeight);\n        this.ctx.translate(margin.left, margin.top);\n\n        renderAxes(this.ctx, {\n            xScale: result.xScale,\n            yScale: result.yScale,\n            width: width,\n            height: height,\n            top: axisTop,\n            right: axisRight,\n            bottom: axisBottom,\n            left: axisLeft\n        });\n\n        result.bars.forEach(function (_ref) {\n            var x = _ref.x,\n                y = _ref.y,\n                color = _ref.color,\n                width = _ref.width,\n                height = _ref.height;\n\n            _this2.ctx.fillStyle = color;\n            _this2.ctx.fillRect(x, y, width, height);\n        });\n    };\n\n    BarCanvas.prototype.render = function render() {\n        var _this3 = this;\n\n        var _props = this.props,\n            outerWidth = _props.outerWidth,\n            outerHeight = _props.outerHeight,\n            pixelRatio = _props.pixelRatio,\n            isInteractive = _props.isInteractive,\n            theme = _props.theme;\n\n\n        return React.createElement(\n            Container,\n            { isInteractive: isInteractive, theme: theme },\n            function (_ref2) {\n                var showTooltip = _ref2.showTooltip,\n                    hideTooltip = _ref2.hideTooltip;\n                return React.createElement('canvas', {\n                    ref: function ref(surface) {\n                        _this3.surface = surface;\n                    },\n                    width: outerWidth * pixelRatio,\n                    height: outerHeight * pixelRatio,\n                    style: {\n                        width: outerWidth,\n                        height: outerHeight\n                    },\n                    onMouseEnter: _this3.handleMouseHover(showTooltip, hideTooltip),\n                    onMouseMove: _this3.handleMouseHover(showTooltip, hideTooltip),\n                    onMouseLeave: _this3.handleMouseLeave(hideTooltip),\n                    onClick: _this3.handleClick\n                });\n            }\n        );\n    };\n\n    return BarCanvas;\n}(Component);\n\nBarCanvas.propTypes = BarPropTypes;\n\nexport default enhance(BarCanvas);"]},"metadata":{},"sourceType":"module"}