{"ast":null,"code":"var _jsxFileName=\"/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/src/components/Diagrams/PieChart.jsx\";import React from'react';import useSWR from'swr';import ChartistGraph from\"react-chartist\";import Legend from\"chartist-plugin-legend\";import{Spinner}from\"react-bootstrap\";/*\n * Creates a data object for ChartistGraph Pie chart.\n * @param: data: json\n */function createPieChartData(data){let total_samples=0;for(let key in data){if(data.hasOwnProperty(key)){total_samples=total_samples+data[key];}}let labels=[];let series=[];for(let key in data){if(data.hasOwnProperty(key)){labels.push(key+\" - \"+data[key]+\"%\");let value=total_samples/100*data[key];value=Math.round((value+Number.EPSILON)*100)/100;series.push(value);}}console.log(\"labels\",JSON.stringify(labels));console.log(\"Series\",JSON.stringify(series));return{labels:labels,series:series};}function PieChart({dataUrl}){const{data,error}=useSWR(dataUrl);if(error)return/*#__PURE__*/React.createElement(\"h1\",{__self:this,__source:{fileName:_jsxFileName,lineNumber:38,columnNumber:21}},\"Something went wrong!\");if(!data)return/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",variant:\"primary\",size:\"mg\",__self:this,__source:{fileName:_jsxFileName,lineNumber:39,columnNumber:21}});console.log(\"PieData\",data.number_of_firmware_by_android_version);const pieData=createPieChartData(data.number_of_firmware_by_android_version);let plugins=[Legend()];return/*#__PURE__*/React.createElement(ChartistGraph,{plugins:plugins,data:pieData,type:\"Pie\",__self:this,__source:{fileName:_jsxFileName,lineNumber:43,columnNumber:10}});}export default PieChart;","map":{"version":3,"sources":["/Users/tom/Documents/MSE/zz_MasterThesis/06_FirmwareDroid/firmware-droid-client/src/components/Diagrams/PieChart.jsx"],"names":["React","useSWR","ChartistGraph","Legend","Spinner","createPieChartData","data","total_samples","key","hasOwnProperty","labels","series","push","value","Math","round","Number","EPSILON","console","log","JSON","stringify","PieChart","dataUrl","error","number_of_firmware_by_android_version","pieData","plugins"],"mappings":"wIAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,KAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,gBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAIA;;;GAIA,QAASC,CAAAA,kBAAT,CAA4BC,IAA5B,CAAiC,CAC/B,GAAIC,CAAAA,aAAa,CAAG,CAApB,CACA,IAAK,GAAIC,CAAAA,GAAT,GAAgBF,CAAAA,IAAhB,CAAsB,CACpB,GAAIA,IAAI,CAACG,cAAL,CAAoBD,GAApB,CAAJ,CAA8B,CAC5BD,aAAa,CAAGA,aAAa,CAAGD,IAAI,CAACE,GAAD,CAApC,CACD,CACF,CACD,GAAIE,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA,IAAK,GAAIH,CAAAA,GAAT,GAAgBF,CAAAA,IAAhB,CAAsB,CACpB,GAAIA,IAAI,CAACG,cAAL,CAAoBD,GAApB,CAAJ,CAA8B,CAC5BE,MAAM,CAACE,IAAP,CAAYJ,GAAG,CAAG,KAAN,CAAcF,IAAI,CAACE,GAAD,CAAlB,CAA0B,GAAtC,EACA,GAAIK,CAAAA,KAAK,CAAIN,aAAa,CAAC,GAAf,CAAsBD,IAAI,CAACE,GAAD,CAAtC,CACAK,KAAK,CAAGC,IAAI,CAACC,KAAL,CAAW,CAACF,KAAK,CAAGG,MAAM,CAACC,OAAhB,EAA2B,GAAtC,EAA6C,GAArD,CACAN,MAAM,CAACC,IAAP,CAAYC,KAAZ,EACD,CACF,CACDK,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBC,IAAI,CAACC,SAAL,CAAeX,MAAf,CAAtB,EACAQ,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBC,IAAI,CAACC,SAAL,CAAeV,MAAf,CAAtB,EACA,MAAO,CAACD,MAAM,CAAEA,MAAT,CAAiBC,MAAM,CAAEA,MAAzB,CAAP,CACD,CAGD,QAASW,CAAAA,QAAT,CAAkB,CAACC,OAAD,CAAlB,CAA6B,CAC3B,KAAM,CAAEjB,IAAF,CAAQkB,KAAR,EAAkBvB,MAAM,CAACsB,OAAD,CAA9B,CACA,GAAIC,KAAJ,CAAW,mBAAO,8HAAP,CACX,GAAI,CAAClB,IAAL,CAAW,mBAAO,oBAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,OAAO,CAAC,SAApC,CAA8C,IAAI,CAAC,IAAnD,6EAAP,CACXY,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBb,IAAI,CAACmB,qCAA5B,EACA,KAAMC,CAAAA,OAAO,CAAGrB,kBAAkB,CAACC,IAAI,CAACmB,qCAAN,CAAlC,CACA,GAAIE,CAAAA,OAAO,CAAG,CAACxB,MAAM,EAAP,CAAd,CACA,mBAAO,oBAAC,aAAD,EAAe,OAAO,CAAEwB,OAAxB,CACe,IAAI,CAAED,OADrB,CAEe,IAAI,CAAC,KAFpB,6EAAP,CAGD,CAED,cAAeJ,CAAAA,QAAf","sourcesContent":["import React from 'react';\nimport useSWR from 'swr';\nimport ChartistGraph from \"react-chartist\";\nimport Legend from \"chartist-plugin-legend\";\nimport { Spinner } from \"react-bootstrap\";\n\n\n\n/*\n * Creates a data object for ChartistGraph Pie chart.\n * @param: data: json\n */\nfunction createPieChartData(data){\n  let total_samples = 0;\n  for (let key in data) {\n    if (data.hasOwnProperty(key)) {\n      total_samples = total_samples + data[key];\n    }\n  }\n  let labels = [];\n  let series = [];\n  for (let key in data) {\n    if (data.hasOwnProperty(key)) {\n      labels.push(key + \" - \" + data[key] + \"%\");\n      let value = (total_samples/100) * data[key];\n      value = Math.round((value + Number.EPSILON) * 100) / 100;\n      series.push(value);\n    }\n  }\n  console.log(\"labels\", JSON.stringify(labels));\n  console.log(\"Series\", JSON.stringify(series));\n  return {labels: labels, series: series}\n}\n\n\nfunction PieChart({dataUrl}) {\n  const { data, error } = useSWR(dataUrl);\n  if (error) return <h1>Something went wrong!</h1>;\n  if (!data) return <Spinner animation=\"border\" variant=\"primary\" size=\"mg\"/>;\n  console.log(\"PieData\", data.number_of_firmware_by_android_version);\n  const pieData = createPieChartData(data.number_of_firmware_by_android_version);\n  let plugins = [Legend()];\n  return <ChartistGraph plugins={plugins}\n                        data={pieData}\n                        type=\"Pie\"/>;\n}\n\nexport default PieChart;\n"]},"metadata":{},"sourceType":"module"}